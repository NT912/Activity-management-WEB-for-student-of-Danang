<!DOCTYPE html>
<html lang="en">
<%- include('../includes/head.ejs', { title: User.username }) %>

<body class="color-theme-blue mont-font">
    <div class="main-wrapper">
        <!-- navigation top-->
        <%- include('../includes/header.ejs', { isLogin: true }) %>
        <!-- navigation top -->

        <!-- navigation left -->
        <%- include('../includes/nav.ejs') %>
        <!-- navigation left -->

        <!-- main content -->
        <div class="main-content right-chat-active">
            <div class="middle-sidebar-bottom">
                <div class="middle-sidebar-left">
                    <div class="row">
                        <div class="col-xl-4 col-xxl-3 col-lg-4 pe-0">
                            <div class="card w-100 shadow-xss rounded-xxl overflow-hidden border-0 mb-3 mt-3 pb-3">
                                <!-- Hiển thị avatar -->
                                <div class="position-relative h150 bg-image-cover bg-image-center">
                                    <img id="avatarImg" src="<%= User.avt %>" alt="image" class="w-100 h-100">
                                    <button type="button" class="btn btn-light position-absolute camera-btn" style="bottom: 0; right: 0; padding: 5px;" onclick="document.getElementById('avatarInput').click();">
                                        <i class="fas fa-camera"></i>
                                    </button>
                                </div>
                                <div class="ml-auto">
                                    <input type="file" id="avatarInput" name="avatar" accept="image/*" class="form-control-file d-none">
                                    <!-- Nút xác nhận tải lên, ẩn lúc đầu -->
                                    <button id="confirmButton" type="button" class="btn btn-success d-none" onclick="uploadAvatar()">Xác nhận</button>
                                </div>
                                <div class="card-body d-block pt-4 text-center">
                                    <h4 class="font-xs ls-1 fw-700 text-grey-900">
                                        <%= User.username %>
                                        <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">
                                            <%= User.email %>
                                        </span>
                                    </h4>
                                </div>
                                <!-- <div class="card-body d-flex align-items-center justify-content-center ps-4 pe-4 pt-0">
                                    <a href="#" class="bg-greylight btn-round-lg ms-2 rounded-3 text-grey-700"><i class="feather-mail font-md"></i></a>
                                    <a href="#" class="bg-greylight theme-white-bg btn-round-lg ms-2 rounded-3 text-grey-700"><i class="ti-more font-md"></i></a>
                                </div> -->
                            </div>
                            <div class="card w-100 shadow-xss rounded-xxl border-0 mb-3">
                                <div class="card-body d-block p-4">
                                    <h4 class="fw-700 mb-3 font-xsss text-grey-900">Giới thiệu</h4>
                                    <p class="fw-500 text-grey-500 lh-24 font-xssss mb-0">
                                        <%= User.description != null ? User.description : 'Chưa có dữ liệu' %>
                                    </p>
                                </div>
                                <div class="card-body border-top-xs d-flex">
                                    <i class="feather-map-pin text-grey-500 me-3 font-lg"></i>
                                    <h4 class="fw-700 text-grey-900 font-xssss mt-0">
                                        Địa chỉ
                                        <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">
                                            <%= User.address != '' ? User.address : 'Chưa có dữ liệu' %>
                                        </span>
                                    </h4>
                                </div>
                                <div class="card-body d-flex pt-0">
                                    <i class="feather-mail text-grey-500 me-3 font-lg"></i>
                                    <h4 class="fw-700 text-grey-900 font-xssss mt-0">
                                        Email
                                        <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">
                                            <%= User.email %>
                                        </span>
                                    </h4>
                                </div>
                                <div class="card-body d-flex pt-0">
                                    <i class="feather-users text-grey-500 me-3 font-lg"></i>
                                    <h4 class="fw-700 text-grey-900 font-xssss mt-0">
                                        Số điện thoại
                                        <span class="d-block font-xssss fw-500 mt-1 lh-3 text-grey-500">
                                            <%= User.phone != null ? User.phone : 'Chưa có dữ liệu' %>
                                        </span>
                                    </h4>
                                </div>
                                <div class="col-lg-12 d-flex justify-content-center">
                                    <a href="/user/edit" class="text-grey-700 text-center font-xssss fw-600 ls-1 rounded-xl">
                                        Sửa thông tin cá nhân
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-8 col-xxl-9 col-lg-8">
                            <div class="card w-100 shadow-xss rounded-xxl border-0 ps-4 pt-4 pe-4 pb-3 mb-3 mt-3">
                                <div class="card-body p-0">
                                    <a href="/activity/create" class="font-xssss fw-600 text-grey-500 card-body p-0 d-flex align-items-center"><i class="btn-round-sm font-xs text-primary feather-edit-3 me-2 bg-greylight"></i>Tạo bài viết</a>
                                </div>
                            </div>

                            <div class="card-body d-block w-100 shadow-none mb-0 p-0 border-top-xs">
                                <ul class="nav nav-tabs h55 d-flex product-info-tab border-bottom-0 ps-4" id="pills-tab" role="tablist">
                                    <li class="nav-item list-inline-item">
                                        <a class="nav-link fw-700 font-xssss text-grey-500 pt-3 pb-3 ls-1 <%= active == 'done' ? 'active' : '' %>" href="/user/profile">
                                            Đã tổ chức
                                        </a>
                                    </li>
                                    <li class="nav-item list-inline-item">
                                        <a class="nav-link fw-700 font-xssss text-grey-500 pt-3 pb-3 ls-1 <%= active == 'wait' ? 'active' : '' %>" href="/user/profile?mod=wait">
                                            Đang chờ duyệt
                                        </a>
                                    </li>
                                    <li class="nav-item list-inline-item ">
                                        <a class="nav-link fw-700 font-xssss text-grey-500 pt-3 pb-3 ls-1 <%= active == 'process' ? 'active' : '' %>" href="/user/profile?mod=process">
                                            Sắp và đang diễn ra
                                        </a>
                                    </li>
                                    <li class="nav-item list-inline-item">
                                        <a class="nav-link fw-700 font-xssss text-grey-500 pt-3 pb-3 ls-1 <%= active == 'saved' ? 'active' : '' %>" href="/user/profile?mod=saved">
                                            Đã lưu
                                        </a>
                                    </li>
                                </ul>
                                <% if (activities.length == 0) { %>
                                    <div class="d-flex justify-content-center align-items-center" style="height: 300px;">
                                        Chưa có hoạt động nào
                                    </div>
                                <% } else { %>
                                    <div class="d-flex flex-wrap">
                                        <div class="col-xl-12 d-flex flex-wrap">
                                            <% activities.forEach(activity => { %>
                                                <div class="px-2 py-2" style="width: 460px;">
                                                    <div class="col-md-12 rounded border px-3 py-3">
                                                        <div class="col-md-12 justify-content-lg-center mb-3" style="height: 200px; overflow: hidden;">
                                                            <img src="<%= activity.image %>" class="img-fluid rounded">
                                                        </div>
                                                        <h5 class="fw-500 font-xsss text-grey-500 mt-1 mb-3 d-block">
                                                            <%- activity.name %>
                                                        </h5>
                                                        <p class="fw-500 font-xssss text-grey-400 mt-1 mb-3 d-block" style="height: 50px; overflow: hidden;">
                                                            <%- activity.description %>
                                                        </p>
                                                        <a href="/activity/<%- activity.id %>/view" class="btn btn-primary">
                                                            Chi tiết
                                                        </a>
                                                    </div>
                                                </div>
                                            <% }) %>
                                        </div>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- main content -->

        <script src="/js/action.js"></script>
        <script src="/js/plugin.js"></script>
        <script src="/js/lightbox.js"></script>
        <script src="/js/scripts.js"></script>

</body>

</html>